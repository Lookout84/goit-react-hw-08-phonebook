(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{100:function(t,e,c){},104:function(t,e,c){"use strict";c.r(e);var n,r,a=c(0),s=c.n(a),u=c(22),o=c.n(u),i=(c(68),c(44)),b=c(45),j=c(47),l=c(46),d=(c(69),c(8)),O=c(12),h=c(3),f=function(t){var e=t.children;return Object(h.jsx)("div",{className:"Container",children:e})},g=c(11),p=c(111),x=c(18),C=Object(O.b)((function(t){return{isAuthenticated:g.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(h.jsxs)(p.a,{variant:"pills",className:"justify-content-start",activeKey:"/home",children:[Object(h.jsx)(p.a.Item,{children:Object(h.jsx)(p.a.Link,{eventKey:"1",as:x.b,to:"/",exact:!0,children:"Home Page"})}),e&&Object(h.jsx)(p.a.Item,{children:Object(h.jsx)(p.a.Link,{eventKey:"2",as:x.b,to:"/contacts",exact:!0,children:"Contacts"})})]})})),v=c.p+"static/media/default-avatar.e44fc4e2.png",m=c(110),S=c(106),k=c(107),y={onLogout:g.a.logOut},E=Object(O.b)((function(t){return{email:g.c.getUseremail(t),avatar:v}}),y)((function(t){var e=t.avatar,c=t.email,n=t.onLogout;return Object(h.jsx)("div",{children:Object(h.jsxs)(m.a,{inline:!0,children:[Object(h.jsx)("img",{src:e,alt:"",width:"32"}),Object(h.jsx)(S.a,{variant:"dark",children:Object(h.jsx)("span",{children:c})})," ",Object(h.jsx)(k.a,{variant:"success",type:"button",onClick:n,children:"Logout"})," "]})})})),R=function(){return Object(h.jsx)("div",{children:Object(h.jsxs)(p.a,{variant:"pills",className:"justify-content-end",activeKey:"/auth",children:[Object(h.jsx)(p.a.Item,{children:Object(h.jsx)(p.a.Link,{eventKey:"1",as:x.b,to:"/register",exact:!0,children:"Registration"})}),Object(h.jsx)(p.a.Item,{children:Object(h.jsx)(p.a.Link,{eventKey:"2",as:x.b,to:"/login",exact:!0,children:"Login"})})]})})},q=c(109),U=Object(O.b)((function(t){return{isAuthenticated:g.c.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(h.jsx)("header",{children:Object(h.jsxs)(q.a,{bg:"dark",variant:"dark",children:[Object(h.jsx)(p.a,{className:"mr-auto",children:Object(h.jsx)(C,{})}),e?Object(h.jsx)(E,{}):Object(h.jsx)(R,{})]})})})),A=c(26),w=c(35),I=Object(O.b)((function(t){return{isAuthenticated:g.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,c=t.isAuthenticated,n=t.redirectTo,r=Object(w.a)(t,["component","isAuthenticated","redirectTo"]);return Object(h.jsx)(d.b,Object(A.a)(Object(A.a)({},r),{},{render:function(t){return c?Object(h.jsx)(e,Object(A.a)({},t)):Object(h.jsx)(d.a,{to:n})}}))})),L=Object(O.b)((function(t){return{isAuthenticated:g.c.getIsAuthenticated(t)}}))((function(t){var e=t.component,c=t.isAuthenticated,n=t.redirectTo,r=Object(w.a)(t,["component","isAuthenticated","redirectTo"]);return Object(h.jsx)(d.b,Object(A.a)(Object(A.a)({},r),{},{render:function(t){return c&&r.restricted?Object(h.jsx)(d.a,{to:n}):Object(h.jsx)(e,Object(A.a)({},t))}}))})),z=c(108),T=Object(a.lazy)((function(){return c.e(0).then(c.bind(null,114))})),K=Object(a.lazy)((function(){return c.e(3).then(c.bind(null,117))})),N=Object(a.lazy)((function(){return c.e(4).then(c.bind(null,115))})),B=Object(a.lazy)((function(){return c.e(1).then(c.bind(null,116))})),G=function(t){Object(j.a)(c,t);var e=Object(l.a)(c);function c(){return Object(i.a)(this,c),e.apply(this,arguments)}return Object(b.a)(c,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(h.jsxs)(f,{children:[Object(h.jsx)(U,{}),Object(h.jsx)(a.Suspense,{fallback:Object(h.jsx)(z.a,{animation:"border",size:"sl"}),children:Object(h.jsxs)(d.d,{children:[Object(h.jsx)(L,{exact:!0,path:"/",component:T}),Object(h.jsx)(I,{path:"/contacts",redirectTo:"/login",component:K}),Object(h.jsx)(L,{path:"/register",restricted:!0,redirectTo:"/contacts",component:N}),Object(h.jsx)(L,{path:"/login",restricted:!0,redirectTo:"/contacts",component:B})]})})]})}}]),c}(a.Component),J={onGetCurrentUser:g.a.getCurrentUser},M=Object(O.b)(null,J)(G),D=(c(99),c(100),c(33)),F=c(7),H=c(61),P=c.n(H),Q=c(21),V=c(6),W=c(9),X=c(13),Y=Object(F.c)([],(n={},Object(V.a)(n,X.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(V.a)(n,X.a.addContactSuccess,(function(t,e){var c=e.payload;return[].concat(Object(D.a)(t),[c])})),Object(V.a)(n,X.a.deleteContactSuccess,(function(t,e){var c=e.payload;return t.filter((function(t){return t.id!==c}))})),n)),Z=Object(F.c)(!1,(r={},Object(V.a)(r,X.a.fetchContactsRequest,(function(){return!0})),Object(V.a)(r,X.a.fetchContactsSuccess,(function(){return!1})),Object(V.a)(r,X.a.fetchContactsError,(function(){return!1})),Object(V.a)(r,X.a.addContactRequest,(function(){return!0})),Object(V.a)(r,X.a.addContactSuccess,(function(){return!1})),Object(V.a)(r,X.a.addContactError,(function(){return!1})),Object(V.a)(r,X.a.deleteContactRequest,(function(){return!0})),Object(V.a)(r,X.a.deleteContactSuccess,(function(){return!1})),Object(V.a)(r,X.a.deleteContactError,(function(){return!1})),r)),$=Object(F.c)("",Object(V.a)({},X.a.filterContact,(function(t,e){return e.payload}))),_=Object(W.c)({items:Y,loading:Z,filter:$}),tt=c(62),et=c.n(tt),ct=[].concat(Object(D.a)(Object(F.d)({serializableCheck:{ignoredActions:[Q.a,Q.f,Q.b,Q.c,Q.d,Q.e]}})),[P.a]),nt={key:"auth",storage:et.a,whitelist:["token"]},rt=Object(F.a)({reducer:{auth:Object(Q.g)(nt,g.b),contacts:_},middleware:ct,devTools:!1}),at={store:rt,persistor:Object(Q.h)(rt)},st=c(63);c(103);o.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(O.a,{store:at.store,children:Object(h.jsx)(st.a,{loading:null,persistor:at.persistor,children:Object(h.jsx)(x.a,{children:Object(h.jsx)(M,{})})})})}),document.getElementById("root"))},11:function(t,e,c){"use strict";c.d(e,"b",(function(){return S})),c.d(e,"a",(function(){return w})),c.d(e,"c",(function(){return I}));var n,r,a,s,u=c(7),o=Object(u.b)("auth/registerRequest"),i=Object(u.b)("auth/registerSuccess"),b=Object(u.b)("auth/registerError"),j=Object(u.b)("auth/loginRequest"),l=Object(u.b)("auth/loginSuccess"),d=Object(u.b)("auth/loginError"),O={registerRequest:o,registerSuccess:i,registerError:b,logoutRequest:Object(u.b)("auth/logoutRequest"),logoutSuccess:Object(u.b)("auth/logoutSuccess"),logoutError:Object(u.b)("auth/logoutError"),loginRequest:j,loginSuccess:l,loginError:d,getCurrentUserRequest:Object(u.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(u.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(u.b)("auth/getCurrentUserError")},h=c(6),f=c(9),g={name:null,email:null},p=Object(u.c)(g,(n={},Object(h.a)(n,O.registerSuccess,(function(t,e){return e.payload.user})),Object(h.a)(n,O.loginSuccess,(function(t,e){return e.payload.user})),Object(h.a)(n,O.logoutSuccess,(function(){return g})),Object(h.a)(n,O.getCurrentUserSuccess,(function(t,e){return e.payload})),n)),x=Object(u.c)(null,(r={},Object(h.a)(r,O.registerSuccess,(function(t,e){return e.payload.token})),Object(h.a)(r,O.loginSuccess,(function(t,e){return e.payload.token})),Object(h.a)(r,O.logoutSuccess,(function(){return null})),r)),C=function(t,e){return e.payload},v=Object(u.c)(null,(a={},Object(h.a)(a,O.registerError,C),Object(h.a)(a,O.loginError,C),Object(h.a)(a,O.logoutError,C),Object(h.a)(a,O.getCurrentUserError,C),a)),m=Object(u.c)(!1,(s={},Object(h.a)(s,O.registerSuccess,(function(){return!0})),Object(h.a)(s,O.loginSuccess,(function(){return!0})),Object(h.a)(s,O.getCurrentUserSuccess,(function(){return!0})),Object(h.a)(s,O.getCurrentUserRequest,(function(){return!0})),Object(h.a)(s,O.registerError,(function(){return!1})),Object(h.a)(s,O.loginError,(function(){return!1})),Object(h.a)(s,O.getCurrentUserError,(function(){return!1})),Object(h.a)(s,O.logoutSuccess,(function(){return!1})),s)),S=Object(f.c)({user:p,token:x,error:v,isAuthenticated:m}),k=c(20),y=c.n(k),E=c(28),R=c(24),q=c.n(R);q.a.defaults.baseURL="https://connections-api.herokuapp.com";var U=function(t){q.a.defaults.headers.common.Authorization="Bearer ".concat(t)},A=function(){q.a.defaults.headers.common.Authorization=""},w={register:function(t){return function(){var e=Object(E.a)(y.a.mark((function e(c){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(O.registerRequest()),e.prev=1,e.next=4,q.a.post("/users/signup",t);case 4:n=e.sent,U(n.data.token),c(O.registerSuccess(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c(O.registerError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(E.a)(y.a.mark((function t(e){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(O.logoutRequest()),t.prev=1,t.next=4,q.a.post("/users/logout");case 4:A(),e(O.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(O.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(E.a)(y.a.mark((function e(c){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(O.loginRequest()),e.prev=1,e.next=4,q.a.post("/users/login",t);case 4:n=e.sent,U(n.data.token),c(O.loginSuccess(n.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c(O.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(E.a)(y.a.mark((function t(e,c){var n,r,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=c(),r=n.auth.token){t.next=3;break}return t.abrupt("return");case 3:return U(r),e(O.getCurrentUserRequest()),t.prev=5,t.next=8,q.a.get("/users/current");case 8:a=t.sent,e(O.getCurrentUserSuccess(a.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(O.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,c){return t.apply(this,arguments)}}()}},I={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUseremail:function(t){return t.auth.user.email}}},13:function(t,e,c){"use strict";var n=c(7),r=Object(n.b)("contacts/fetchContactsRequest"),a=Object(n.b)("contacts/fetchContactsSuccess"),s=Object(n.b)("contacts/fetchContactsError"),u=Object(n.b)("contacts/addContactsRequest"),o=Object(n.b)("contacts/addContactsSuccess"),i=Object(n.b)("contacts/addContactsError"),b=Object(n.b)("contacts/deleteContactsRequest"),j=Object(n.b)("contacts/deleteContactsSuccess"),l=Object(n.b)("contacts/deleteContactsError"),d=Object(n.b)("contacts/FilterContact");e.a={fetchContactsRequest:r,fetchContactsSuccess:a,fetchContactsError:s,addContactRequest:u,addContactSuccess:o,addContactError:i,deleteContactRequest:b,deleteContactSuccess:j,deleteContactError:l,filterContact:d}},68:function(t,e,c){},69:function(t,e,c){}},[[104,5,6]]]);
//# sourceMappingURL=main.7d832f59.chunk.js.map